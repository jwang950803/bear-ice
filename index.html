<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç†Šå†°O - å˜‰ç¾©ä¸­åŸ”å†·å‡é£Ÿå“é¦–é¸</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root {
            --polar-blue: #0ea5e9; --deep-ice: #0c4a6e; --accent-red: #ef4444;
            --glass: rgba(255, 255, 255, 0.8);
        }
        
        body { font-family: 'PingFang TC', sans-serif; background: #f8fafc; margin: 0; scroll-behavior: smooth; overflow-x: hidden; }

        /* 1. å“ç‰Œé¦–é  (Landing Page) */
        .hero-home {
            height: 100vh; width: 100%;
            background: linear-gradient(rgba(12,74,110,0.6), rgba(12,74,110,0.8)), url('https://images.unsplash.com/photo-1580913425032-69024f2b1898?auto=format&fit=crop&w=1200&q=80');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: white; text-align: center;
        }
        .hero-logo { width: 120px; height: 120px; border-radius: 50%; border: 4px solid white; margin-bottom: 20px; box-shadow: 0 0 30px rgba(255,255,255,0.3); }
        .hero-title { font-size: 3.5rem; margin: 0; letter-spacing: 5px; font-weight: 900; }
        .hero-tagline { font-size: 1.2rem; margin: 20px 0; opacity: 0.9; }
        .shop-now-btn {
            background: var(--accent-red); color: white; padding: 15px 40px;
            border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 1.2rem;
            transition: 0.3s; border: 2px solid transparent;
        }
        .shop-now-btn:hover { background: white; color: var(--accent-red); transform: scale(1.05); }

        /* å°è¦½åˆ— (æ²å‹•å¾Œæ‰å‡ºç¾æˆ–å›ºå®š) */
        nav { background: var(--glass); backdrop-filter: blur(10px); padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }

        /* å•†å“å¡ç‰‡å¼·åŒ– */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(170px, 1fr)); gap: 20px; padding: 20px 0; }
        .card { 
            background: white; border-radius: 20px; overflow: hidden; 
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid #f1f5f9; position: relative;
        }
        .card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .card img { width: 100%; height: 130px; object-fit: contain; padding: 15px; box-sizing: border-box; background: #fbfcfd; }
        
        /* åŠ å…¥æˆåŠŸçš„è¦–è¦ºåé¥‹ */
        .add-btn { 
            background: var(--deep-ice); color: white; border: none; width: 100%; 
            padding: 12px; font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        .add-btn.success { background: #22c55e !important; }

        /* æ‡¸æµ®è³¼ç‰©è»Šå°å·¥å…· */
        #cart-widget {
            position: fixed; bottom: 30px; right: 30px;
            background: var(--accent-red); color: white; padding: 15px 25px;
            border-radius: 50px; box-shadow: 0 10px 30px rgba(239,68,68,0.4);
            cursor: pointer; display: flex; align-items: center; gap: 10px; z-index: 2000;
        }
        .cart-bounce { animation: bounceIn 0.5s; }

        /* å–è²¨æ™‚é–“é¸æ“‡å™¨ç²¾ç·»åŒ– */
        .pickup-info { background: #f1f5f9; padding: 15px; border-radius: 15px; margin-bottom: 15px; font-size: 0.9rem; }
        
        /* å´æ¬„çµå¸³é¢æ¿ */
        #checkout-panel {
            position: fixed; top: 0; right: -100%; width: 100%; max-width: 420px; height: 100%;
            background: white; z-index: 3000; transition: 0.5s; padding: 30px; box-sizing: border-box;
            box-shadow: -10px 0 40px rgba(0,0,0,0.1);
        }
        #checkout-panel.active { right: 0; }

        /* å‹•ç•«å°çƒ */
        .fly-item {
            position: fixed; width: 20px; height: 20px; background: var(--accent-red);
            border-radius: 50%; z-index: 9999; pointer-events: none;
        }
    </style>
</head>
<body>

<div class="hero-home">
    <img src="logo.png" class="hero-logo animate__animated animate__fadeInDown" onerror="this.src='https://ui-avatars.com/api/?name=ç†Šå†°O&background=ef4444&color=fff'">
    <h1 class="hero-title animate__animated animate__fadeInUp">ç†Šå†°O</h1>
    <p class="hero-tagline animate__animated animate__fadeIn animate__delay-1s">å˜‰ç¾©ä¸­åŸ”ï¼åœ¨åœ°äººçš„å†·å‡ç¾é£Ÿå¤§å¯¶åº«</p>
    <a href="#order-section" class="shop-now-btn animate__animated animate__pulse animate__infinite">é–‹å§‹é¸è³¼ âœ</a>
</div>

<nav id="main-nav">
    <div style="display:flex; align-items:center; gap:10px;">
        <img src="logo.png" style="width:35px; height:35px; border-radius:50%;" onerror="this.style.display='none'">
        <span style="font-weight:900; color:var(--deep-ice);">ç†Šå†°O</span>
    </div>
    <div style="font-size:0.8rem; background: #e0f2fe; color: #0369a1; padding: 5px 12px; border-radius: 20px;">ä»Šæ—¥æ­£å¸¸ç‡Ÿæ¥­</div>
</nav>

<section id="order-section">
    <div style="display:flex; justify-content:space-between; align-items:flex-end; margin-bottom: 20px;">
        <h2 style="color:var(--deep-ice); margin:0;">â„ï¸ ç²¾é¸å†·å‡é£Ÿå“</h2>
    </div>
    <div class="grid" id="product-grid"></div>
</section>

<section style="background: white; padding: 50px 5%;">
    <div style="text-align:center;">
        <h2>ğŸ“ æ­¡è¿ä¾†åº—å–è²¨</h2>
        <p>å˜‰ç¾©ç¸£ä¸­åŸ”é„‰æ°¸æ¨‚æ–°æ‘248è™Ÿ</p>
        <div style="border-radius:25px; overflow:hidden; border: 8px solid #f8fafc; margin: 20px 0;">
            <iframe src="http://googleusercontent.com/maps.google.com/7" width="100%" height="300" style="border:0;" loading="lazy"></iframe>
        </div>
        <a href="https://www.google.com/maps/dir/?api=1&destination=å˜‰ç¾©ç¸£ä¸­åŸ”é„‰å’Œç¾æ‘æ°¸æ¨‚æ–°æ‘248è™Ÿ" target="_blank" class="shop-now-btn" style="background:#4285F4;">é–‹å•Ÿå°è¦½</a>
    </div>
</section>

<div id="cart-widget" onclick="toggleCart()">
    ğŸ›’ <span id="widget-total">$0</span>
    <span style="background:white; color:var(--accent-red); border-radius:50%; width:24px; height:24px; display:flex; align-items:center; justify-content:center; font-size:0.8rem;" id="count">0</span>
</div>

<div id="checkout-panel">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 style="color:var(--deep-ice);">é ç´„è¨‚å–®</h2>
        <button onclick="toggleCart()" style="border:none; background:none; font-size:2rem; cursor:pointer;">âœ•</button>
    </div>
    
    <div class="pickup-info">
        <b>ğŸª åº—é¢è³‡è¨Šï¼š</b>å˜‰ç¾©ä¸­åŸ”æ°¸æ¨‚æ–°æ‘248è™Ÿ<br>
        <b>â° å–è²¨æ™‚é–“ï¼š</b>è«‹æ–¼ä¸‹æ–¹é¸æ“‡æ—¥æœŸï¼Œæˆ‘å€‘å°‡ç‚ºæ‚¨å‚™è²¨ã€‚
    </div>

    <div id="cart-items" style="max-height: 200px; overflow-y: auto; margin-bottom: 20px;"></div>
    
    <div style="text-align:right; font-size:1.5rem; font-weight:900; color:var(--accent-red); margin-bottom: 20px;">
        ç¸½è¨ˆ: $<span id="total-sum">0</span>
    </div>

    <input type="text" id="cust-name" placeholder="è¨‚è³¼äººå§“å">
    <input type="tel" id="cust-phone" placeholder="è¯çµ¡é›»è©±">
    <label style="font-size:0.8rem; font-weight:bold; color:var(--deep-ice);">ğŸ“… é ç´„å–è²¨æ—¥æœŸ</label>
    <input type="date" id="pickup-date">
    <textarea id="note" placeholder="å‚™è¨» (å¦‚ï¼šéœ€è¦åˆ†è£ã€æˆ–å¤§ç´„å¹¾é»ä¾†å–)"></textarea>
    
    <button class="add-btn" style="border-radius:15px; padding:15px; font-size:1.2rem; background:var(--accent-red);" onclick="submitOrder()">ç¢ºèªé€å‡ºé ç´„</button>
</div>

<script>
    const GOOGLE_URL = "åœ¨æ­¤è²¼ä¸Šä½ çš„GASç¶²å€";

    const products = [
        { name: "æŠ«è–©(ä¸€å€‹)", price: 20 }, { name: "æª¸æª¬é›æŸ³", price: 50 },
        { name: "åŸå‘³é›ç±³èŠ±", price: 50 }, { name: "æ¸¯å¼è˜¿è””ç³•", price: 50 },
        { name: "é¯›é­šç‰‡", price: 60 }, { name: "é†ƒæ¼¬é›è…¿æ’", price: 100 }
        // ... å…¶ä»–å•†å“
    ];

    let cart = [];

    function renderProducts() {
        const grid = document.getElementById('product-grid');
        grid.innerHTML = products.map((p, idx) => `
            <div class="card">
                <img src="logo.png" onerror="this.src='https://ui-avatars.com/api/?name=${p.name}&background=f8fafc&color=0c4a6e'">
                <div style="padding:15px; text-align:center;">
                    <div style="font-weight:bold; margin-bottom:5px;">${p.name}</div>
                    <div style="color:var(--accent-red); font-weight:900; margin-bottom:10px;">$${p.price}</div>
                    <button class="add-btn" id="btn-${idx}" onclick="addToCart('${p.name}', ${p.price}, ${idx}, event)">åŠ å…¥è³¼ç‰©è»Š</button>
                </div>
            </div>
        `).join('');
    }

    function addToCart(n, p, idx, event) {
        cart.push({name: n, price: p});
        
        // 1. è§¸è¦ºå›é¥‹
        if (navigator.vibrate) navigator.vibrate(50);

        // 2. æŒ‰éˆ•æˆåŠŸåé¥‹
        const btn = document.getElementById(`btn-${idx}`);
        const originalText = btn.innerText;
        btn.innerText = "å·²åŠ å…¥ âœ“";
        btn.classList.add('success');
        setTimeout(() => { 
            btn.innerText = originalText; 
            btn.classList.remove('success'); 
        }, 800);

        // 3. æ‹‹ç‰©ç·šå‹•ç•«
        createFlyAnim(event);

        updateUI();
    }

    function createFlyAnim(e) {
        const ball = document.createElement('div');
        ball.className = 'fly-item';
        ball.style.left = e.clientX + 'px';
        ball.style.top = e.clientY + 'px';
        document.body.appendChild(ball);

        const cartPos = document.getElementById('cart-widget').getBoundingClientRect();
        
        ball.animate([
            { transform: 'translate(0, 0) scale(1)', opacity: 1 },
            { transform: `translate(${cartPos.left - e.clientX}px, ${cartPos.top - e.clientY}px) scale(0.1)`, opacity: 0 }
        ], { duration: 600, easing: 'ease-in-out' });

        setTimeout(() => ball.remove(), 600);
        
        // è³¼ç‰©è»Šè·³å‹•å‹•ç•«
        setTimeout(() => {
            document.getElementById('cart-widget').classList.add('cart-bounce');
            setTimeout(() => document.getElementById('cart-widget').classList.remove('cart-bounce'), 500);
        }, 500);
    }

    function updateUI() {
        document.getElementById('count').innerText = cart.length;
        const total = cart.reduce((s, i) => s + i.price, 0);
        document.getElementById('widget-total').innerText = '$' + total;
        document.getElementById('total-sum').innerText = total;
        
        document.getElementById('cart-items').innerHTML = cart.map((i, idx) => `
            <div style="display:flex; justify-content:space-between; padding:10px; background:#f8fafc; border-radius:10px; margin-bottom:10px;">
                <span>${i.name}</span>
                <span>$${i.price} <button onclick="cart.splice(${idx},1);updateUI();" style="color:red; border:none; background:none; cursor:pointer;">âœ•</button></span>
            </div>
        `).join('');
    }

    function toggleCart() { document.getElementById('checkout-panel').classList.toggle('active'); }

    // åˆå§‹åŒ–
    renderProducts();
    document.getElementById('pickup-date').min = new Date().toISOString().split('T')[0];
</script>

</body>
</html>
