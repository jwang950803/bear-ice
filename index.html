<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç†Šå†°O - å†·å‡é£Ÿå“æ——è‰¦åº—</title>
    <style>
        :root {
            --polar-blue: #0ea5e9; --deep-ice: #0c4a6e; --accent-red: #ef4444; --bg-light: #f1f5f9;
        }
        body { font-family: 'PingFang TC', sans-serif; background: #f0f9ff; margin: 0; scroll-behavior: smooth; }
        
        /* å°è¦½åˆ—èˆ‡åˆ†é¡åˆ— */
        nav { background: white; padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .category-nav { background: white; overflow-x: auto; white-space: nowrap; padding: 10px 5%; position: sticky; top: 60px; z-index: 999; border-bottom: 1px solid #e2e8f0; display: flex; gap: 10px; scrollbar-width: none; }
        .category-nav::-webkit-scrollbar { display: none; }
        .cat-item { padding: 8px 16px; border-radius: 50px; background: #f1f5f9; color: #475569; text-decoration: none; font-size: 0.85rem; font-weight: bold; transition: 0.3s; }
        .cat-item.active { background: var(--deep-ice); color: white; }

        /* å•†å“å€å¡Š */
        section { padding: 30px 5%; max-width: 1200px; margin: 0 auto; }
        .section-header { font-size: 1.4rem; font-weight: 900; color: var(--deep-ice); margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; }
        .card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); text-align: center; }
        .card img { width: 100%; height: 110px; object-fit: contain; background: #f8fafc; padding: 10px; box-sizing: border-box; }
        .add-btn { background: var(--deep-ice); color: white; border: none; width: 100%; padding: 10px; border-radius: 0; cursor: pointer; font-weight: bold; }

        /* è³¼ç‰©è»Šèˆ‡çµå¸³é¢æ¿ */
        #cart-widget { position: fixed; bottom: 25px; right: 25px; background: var(--accent-red); color: white; padding: 12px 20px; border-radius: 50px; font-weight: bold; box-shadow: 0 10px 20px rgba(239, 68, 68, 0.3); z-index: 2000; cursor: pointer; }
        #checkout-panel { position: fixed; top: 0; right: -100%; width: 100%; max-width: 400px; height: 100%; background: white; z-index: 3000; transition: 0.4s; padding: 25px; box-shadow: -10px 0 30px rgba(0,0,0,0.1); box-sizing: border-box; overflow-y: auto; }
        #checkout-panel.active { right: 0; }
        
        /* è¡¨å–®å…ƒç´  */
        .remember-me { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; color: #64748b; margin-bottom: 15px; cursor: pointer; }
        input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }
        input, select, textarea { width:100%; padding:12px; margin-bottom:10px; border:1px solid #e2e8f0; border-radius:10px; box-sizing:border-box; }
    </style>
</head>
<body>

<nav>
    <div style="display:flex; align-items:center; gap:10px;">
        <img src="logo.png" style="width:35px; height:35px; border-radius:50%; border:1px solid var(--accent-red);" onerror="this.src='https://ui-avatars.com/api/?name=ç†Šå†°O&background=ef4444&color=fff'">
        <h1 style="margin:0; font-size:1.2rem; color:var(--deep-ice);">ç†Šå†°O</h1>
    </div>
    <div style="font-size: 0.8rem; font-weight: bold;">å†·å‡é£Ÿå“æ‰¹ç™¼é›¶å”®</div>
</nav>

<div class="category-nav" id="cat-nav">
    <a href="#cat-pot" class="cat-item active">ç«é‹æ–™</a>
    <a href="#cat-fry" class="cat-item">ç†±é–€ç‚¸ç‰©</a>
    <a href="#cat-meat" class="cat-item">æµ·é®®è‚‰é¡</a>
    <a href="#cat-main" class="cat-item">ç²¾é¸éºµé£Ÿ</a>
    <a href="#cat-map" class="cat-item">åº—é¢ä½ç½®</a>
</div>

<section id="cat-pot"><div class="section-header">ğŸ”¥ ç«é‹æ–™å°ˆå€</div><div class="grid" id="grid-pot"></div></section>
<section id="cat-fry"><div class="section-header">ğŸŸ ç†±é–€é»å¿ƒç‚¸ç‰©</div><div class="grid" id="grid-fry"></div></section>
<section id="cat-meat"><div class="section-header">ğŸ¥© æµ·é®®è‚‰é¡</div><div class="grid" id="grid-meat"></div></section>
<section id="cat-main"><div class="section-header">ğŸœ ç²¾é¸éºµé£Ÿ</div><div class="grid" id="grid-main"></div></section>

<section id="cat-map" style="text-align:center;">
    <div style="background:white; padding:25px; border-radius:20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
        <h3>ğŸ“ å˜‰ç¾©ç¸£ä¸­åŸ”é„‰æ°¸æ¨‚æ–°æ‘248è™Ÿ</h3>
        <a href="https://www.google.com/maps/dir/?api=1&destination=å˜‰ç¾©ç¸£ä¸­åŸ”é„‰å’Œç¾æ‘æ°¸æ¨‚æ–°æ‘248è™Ÿ" target="_blank" style="color:var(--polar-blue); font-weight:bold; text-decoration:none;">ğŸš€ é»æˆ‘é–‹å•Ÿå°èˆª</a>
        <div style="margin-top:15px; border-radius:15px; overflow:hidden; border:2px solid #eee;">
            <iframe src="http://googleusercontent.com/maps.google.com/6" width="100%" height="250" style="border:0;" loading="lazy"></iframe>
        </div>
    </div>
</section>

<div id="cart-widget" onclick="toggleCart()">ğŸ›’ è³¼ç‰©è»Š (<span id="count">0</span>)</div>

<div id="checkout-panel">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3>æˆ‘çš„è¨‚è³¼å–®</h3>
        <button onclick="toggleCart()" style="border:none; background:none; font-size:1.5rem; cursor:pointer;">âœ•</button>
    </div>
    <div id="cart-items" style="margin:20px 0;"></div>
    <div style="text-align:right; font-size:1.2rem; font-weight:bold; color:var(--accent-red); border-top:1px solid #eee; padding-top:10px;">ç¸½è¨ˆ: $<span id="total">0</span></div>
    <br>
    
    <input type="text" id="cust-name" placeholder="è¨‚è³¼äººå§“å">
    <input type="tel" id="cust-phone" placeholder="è¯çµ¡é›»è©±">
    
    <label class="remember-me">
        <input type="checkbox" id="remember-info" checked> è¨˜ä½æˆ‘çš„è³‡è¨Š (ä¸‹æ¬¡å…é‡å¡«)
    </label>
    
    <label style="font-size:0.8rem; font-weight:bold; color:#475569;">é ç´„å–è²¨æ—¥æœŸ</label>
    <input type="date" id="pickup-date">
    <textarea id="note" placeholder="å‚™è¨»èªªæ˜..."></textarea>
    <button class="add-btn" style="background:var(--accent-red); padding:15px; border-radius:10px;" onclick="submitOrder()">ç¢ºèªé€å‡ºé ç´„</button>
</div>

<script>
    const GOOGLE_URL = "https://script.google.com/macros/s/AKfycbzfHhadFwFzg5P005DzlftVNpPFg4HqOxfy3p0ajZwEWAWP_XTinFypj-CFHkFBKJ1E/exec";

    const products = {
        pot: [ { name: "ç¶œåˆç«é‹æ–™(ç§¤æ–¤)", price: 50 }, { name: "éº»ç³¬è›‹é»ƒèŠ‹ä¸¸", price: 70 }, { name: "ç¶œåˆç‡’è³£", price: 100 } ],
        fry: [ { name: "æŠ«è–©(ä¸€å€‹)", price: 20 }, { name: "æª¸æª¬é›æŸ³", price: 50 }, { name: "åŸå‘³é›ç±³èŠ±", price: 50 }, { name: "é›å¡Š", price: 50 }, { name: "èœœç³–å°è‚‰è±†", price: 50 }, { name: "é»ƒé‡‘è„†è–¯", price: 50 }, { name: "æ¸¯å¼è˜¿è””ç³•", price: 50 } ],
        meat: [ { name: "é¯›é­šç‰‡", price: 60 }, { name: "æª¸æª¬è´è¶è…¿", price: 100 }, { name: "é†ƒæ¼¬é›è…¿æ’", price: 100 }, { name: "é¹¹è±¬è‚‰", price: 100 }, { name: "é›è‚‰æ²", price: 100 } ],
        main: [ { name: "è’¸ç…®éºµ", price: 10 }, { name: "ç§‘å­¸éºµ(2åŒ…)", price: 15 }, { name: "é‹ç‡’éºµ(3åŒ…)", price: 20 }, { name: "æ‰‹å·¥è”¥æŠ“é¤…", price: 100 }, { name: "çƒé¾éºµ", price: 100 } ]
    };

    let cart = [];

    // åˆå§‹åŒ–ï¼šè®€å–è¨˜ä½çš„è³‡è¨Š
    window.onload = function() {
        const savedName = localStorage.getItem('bear_name');
        const savedPhone = localStorage.getItem('bear_phone');
        if (savedName) document.getElementById('cust-name').value = savedName;
        if (savedPhone) document.getElementById('cust-phone').value = savedPhone;
        renderAll();
    };

    function renderCategory(catId, items) {
        document.getElementById('grid-' + catId).innerHTML = items.map(p => `
            <div class="card">
                <img src="logo.png" onerror="this.src='https://ui-avatars.com/api/?name=${p.name}&background=f1f5f9&color=0c4a6e'">
                <div style="padding:10px;">
                    <div class="card-title">${p.name}</div>
                    <div class="card-price">$${p.price}</div>
                </div>
                <button class="add-btn" onclick="addToCart('${p.name}', ${p.price})">åŠ å…¥</button>
            </div>
        `).join('');
    }

    function renderAll() {
        renderCategory('pot', products.pot); renderCategory('fry', products.fry);
        renderCategory('meat', products.meat); renderCategory('main', products.main);
    }

    function addToCart(n, p) { cart.push({name: n, price: p}); updateUI(); }
    
    function updateUI() {
        document.getElementById('count').innerText = cart.length;
        const total = cart.reduce((s, i) => s + i.price, 0);
        document.getElementById('total').innerText = total;
        document.getElementById('cart-items').innerHTML = cart.map((i, idx) => `
            <div style="display:flex; justify-content:space-between; margin-bottom:8px; font-size:0.9rem;">
                <span>${i.name}</span>
                <span>$${i.price} <button onclick="cart.splice(${idx},1);updateUI();" style="color:red; border:none; background:none; cursor:pointer;">âœ•</button></span>
            </div>
        `).join('');
    }

    function toggleCart() { document.getElementById('checkout-panel').classList.toggle('active'); }

    async function submitOrder() {
        const n = document.getElementById('cust-name').value;
        const p = document.getElementById('cust-phone').value;
        const d = document.getElementById('pickup-date').value;
        const remember = document.getElementById('remember-info').checked;

        if(!n || !p || !d || cart.length === 0) return alert("è«‹å¡«å¯«å®Œæ•´è³‡æ–™ï¼");

        // è¨˜ä½è³‡è¨Šé‚è¼¯
        if (remember) {
            localStorage.setItem('bear_name', n);
            localStorage.setItem('bear_phone', p);
        } else {
            localStorage.removeItem('bear_name');
            localStorage.removeItem('bear_phone');
        }

        const btn = document.querySelector('#checkout-panel .add-btn');
        btn.innerText = "å‚³é€ä¸­..."; btn.disabled = true;

        try {
            const items = cart.map(i => i.name).join(', ');
            await fetch(`${GOOGLE_URL}?name=${encodeURIComponent(n)}&phone=${encodeURIComponent(p)}&items=${encodeURIComponent(items)}&total=${cart.reduce((s,i)=>s+i.price,0)}&note=${encodeURIComponent('å–è²¨:'+d+' | '+document.getElementById('note').value)}`, {method:'POST', mode:'no-cors'});
            alert("ğŸ‰ é ç´„æˆåŠŸï¼è¨˜å¾—ä¾†å–è²¨å–”ï¼");
            cart = []; updateUI(); toggleCart();
        } catch(e) { alert("ç³»çµ±å¤±æ•—ï¼Œè«‹æ’¥æ‰“é›»è©± 05-2393005"); }
        btn.innerText = "ç¢ºèªé€å‡ºé ç´„"; btn.disabled = false;
    }

    // åˆ†é¡åˆ—è¯å‹•æ•ˆæœ
    window.addEventListener('scroll', () => {
        let current = "";
        const sections = document.querySelectorAll('section');
        sections.forEach(s => { if (pageYOffset >= s.offsetTop - 150) current = s.getAttribute('id'); });
        document.querySelectorAll('.cat-item').forEach(a => {
            a.classList.remove('active');
            if (a.getAttribute('href').includes(current)) a.classList.add('active');
        });
    });
</script>
</body>
</html>
