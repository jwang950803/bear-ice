<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç†Šå†°O - æ——è‰¦åº—é•·ç®¡ç†å¾Œå°</title>
    <style>
        :root { --dark: #0c4a6e; --accent: #ef4444; --bg: #f8fafc; }
        body { font-family: 'PingFang TC', sans-serif; background: var(--bg); margin: 0; padding: 20px; color: #334155; }
        .admin-container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        h1 { color: var(--dark); border-left: 5px solid var(--accent); padding-left: 15px; font-size: 1.5rem; }
        
        /* ç‡Ÿæ¥­ç‹€æ…‹é–‹é—œ */
        .status-box { background: #f1f5f9; padding: 20px; border-radius: 15px; margin-bottom: 25px; display: flex; align-items: center; justify-content: space-between; }
        .switch { position: relative; display: inline-block; width: 60px; height: 34px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #22c55e; }
        input:checked + .slider:before { transform: translateX(26px); }

        /* è¡¨å–®æ¨£å¼ */
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9rem; }
        input, select { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; box-sizing: border-box; }
        .submit-btn { background: var(--dark); color: white; border: none; width: 100%; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        
        /* å•†å“åˆ—è¡¨ */
        .product-list { margin-top: 30px; }
        .product-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #f1f5f9; }
        .p-category { font-size: 0.7rem; background: #e0f2fe; color: #0369a1; padding: 2px 8px; border-radius: 5px; margin-right: 10px; }
        .del-btn { color: var(--accent); cursor: pointer; font-weight: bold; border: none; background: none; }
    </style>
</head>
<body>

<div class="admin-container">
    <h1>ğŸ» ç†Šå†°O åº—é•·æ§åˆ¶é¢æ¿</h1>

    <div class="status-box">
        <div>
            <strong style="font-size: 1.1rem;">ç¶²é ç‡Ÿæ¥­ç‹€æ…‹</strong><br>
            <span id="status-text" style="color: #64748b; font-size: 0.85rem;">ç›®å‰ç‹€æ…‹ï¼šè¼‰å…¥ä¸­...</span>
        </div>
        <label class="switch">
            <input type="checkbox" id="store-switch" onchange="toggleStoreStatus()">
            <span class="slider"></span>
        </label>
    </div>

    <div style="background: #fff; border: 1px solid #e2e8f0; padding: 20px; border-radius: 15px;">
        <h3 style="margin-top:0;">âœ¨ æ–°å¢/æ›´æ–°å•†å“</h3>
        <div class="form-group">
            <label>å•†å“åç¨±</label>
            <input type="text" id="p-name" placeholder="ä¾‹å¦‚ï¼šæ‰‹å·¥æ°´é¤ƒ">
        </div>
        <div class="form-group">
            <label>é¡¯ç¤ºåˆ†å€</label>
            <select id="p-cat">
                <option value="pot">ğŸ¢ ç«é‹æ–™ / ç§¤æ–¤å°é»</option>
                <option value="fry">ğŸŸ ç†±é–€é»å¿ƒç‚¸ç‰©</option>
                <option value="meat">ğŸ¥© æµ·é®®èˆ‡å„å¼è‚‰é¡</option>
                <option value="main">ğŸœ ç²¾é¸ä¸»é£Ÿéºµé¡</option>
            </select>
        </div>
        <div class="form-group">
            <label>å–®åƒ¹ (å…ƒ)</label>
            <input type="number" id="p-price" placeholder="ä¾‹å¦‚ï¼š180">
        </div>
        <button class="submit-btn" onclick="saveProduct()">ç¢ºèªä¸¦ä¸Šæ¶</button>
    </div>

    <div class="product-list">
        <h3>ğŸ“¦ ç¾æœ‰å•†å“ç®¡ç†</h3>
        <div id="list-container"></div>
    </div>
</div>

<script>
    // åˆå§‹åŒ–è³‡æ–™
    let products = JSON.parse(localStorage.getItem('bear_p_list')) || [];
    let isOpen = localStorage.getItem('bear_store_open') !== 'false'; // é è¨­é–‹å•Ÿ

    function init() {
        // è¨­å®šé–‹é—œç‹€æ…‹
        document.getElementById('store-switch').checked = isOpen;
        updateStatusText();
        renderList();
    }

    function updateStatusText() {
        const text = document.getElementById('status-text');
        if (isOpen) {
            text.innerText = "ç›®å‰ç‹€æ…‹ï¼šğŸŸ¢ æ­£å¸¸ç‡Ÿæ¥­ä¸­ (é¡§å®¢å¯ä¸‹å–®)";
            text.style.color = "#22c55e";
        } else {
            text.innerText = "ç›®å‰ç‹€æ…‹ï¼šğŸ”´ å…¬ä¼‘ä¸­ (é¡§å®¢ç„¡æ³•é»æ“Šä¸‹å–®)";
            text.style.color = "#ef4444";
        }
    }

    function toggleStoreStatus() {
        isOpen = document.getElementById('store-switch').checked;
        localStorage.setItem('bear_store_open', isOpen);
        updateStatusText();
        alert(isOpen ? "åº—é‹ªå·²é–‹å•Ÿï¼" : "åº—é‹ªå·²è¨­ç‚ºå…¬ä¼‘ç‹€æ…‹ã€‚");
    }

    function saveProduct() {
        const name = document.getElementById('p-name').value;
        const cat = document.getElementById('p-cat').value;
        const price = document.getElementById('p-price').value;

        if (!name || !price) return alert("è«‹å¡«å¯«åç¨±èˆ‡åƒ¹æ ¼");

        // å¦‚æœåç¨±é‡è¤‡å‰‡è¦†è“‹
        const index = products.findIndex(p => p.name === name);
        if (index > -1) {
            products[index] = { name, cat, price: parseInt(price) };
        } else {
            products.push({ name, cat, price: parseInt(price) });
        }

        localStorage.setItem('bear_p_list', JSON.stringify(products));
        alert("å•†å“å·²åŒæ­¥ï¼");
        renderList();
        // æ¸…ç©ºè¼¸å…¥
        document.getElementById('p-name').value = '';
        document.getElementById('p-price').value = '';
    }

    function renderList() {
        const container = document.getElementById('list-container');
        const catNames = { pot: "ç«é‹æ–™", fry: "ç‚¸ç‰©", meat: "è‚‰é¡", main: "éºµé£Ÿ" };
        
        container.innerHTML = products.map((p, idx) => `
            <div class="product-item">
                <div>
                    <span class="p-category">${catNames[p.cat] || 'ä¸€èˆ¬'}</span>
                    <strong>${p.name}</strong> - $${p.price}
                </div>
                <button class="del-btn" onclick="deleteProduct(${idx})">åˆªé™¤</button>
            </div>
        `).reverse().join('');
    }

    function deleteProduct(idx) {
        if (confirm("ç¢ºå®šè¦ä¸‹æ¶æ­¤å•†å“å—ï¼Ÿ")) {
            // æ³¨æ„ï¼šå› ç‚º renderList æ˜¯åè½‰é¡¯ç¤ºï¼Œç´¢å¼•è¦è™•ç†
            const realIdx = products.length - 1 - idx;
            products.splice(realIdx, 1);
            localStorage.setItem('bear_p_list', JSON.stringify(products));
            renderList();
        }
    }

    init();
</script>
</body>
</html>
