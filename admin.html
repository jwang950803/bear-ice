<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>ç†Šå†°O - åº—é•·ç®¡ç†ç³»çµ±</title>
    <style>
        body { font-family: sans-serif; background: #0f172a; color: white; padding: 20px; }
        .box { background: #1e293b; padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 1px solid #334155; }
        table { width: 100%; border-collapse: collapse; background: white; color: #333; margin-top: 15px; }
        th, td { padding: 10px; border-bottom: 1px solid #eee; text-align: left; }
        input { padding: 8px; border-radius: 5px; border: none; margin-bottom: 10px; width: 200px; display: block; }
        button { cursor: pointer; padding: 10px 20px; border-radius: 8px; border: none; background: #0077b6; color: white; font-weight: bold; }
        .product-item { display: flex; align-items: center; justify-content: space-between; background: #334155; padding: 10px; margin-bottom: 5px; border-radius: 8px; }
        .item-img { width: 50px; height: 50px; border-radius: 5px; object-fit: cover; margin-right: 15px; }
    </style>
</head>
<body>
    <h1>ğŸ›  ç†Šå†°O ç®¡ç†ç³»çµ±</h1>
    
    <div class="box">
        <h3>âœ¨ ä¸Šæ¶æ–°å•†å“</h3>
        <label>å•†å“åç¨±ï¼š</label>
        <input type="text" id="p-name" placeholder="ä¾‹å¦‚ï¼šæ‰‹å·¥æ°´é¤ƒ">
        <label>åƒ¹æ ¼ï¼š</label>
        <input type="number" id="p-price" placeholder="ä¾‹å¦‚ï¼š180">
        <label>ç…§ç‰‡é€£çµ (ç¶²å€)ï¼š</label>
        <input type="text" id="p-img" placeholder="è«‹è²¼ä¸Šåœ–ç‰‡ç¶²å€">
        <button onclick="addProduct()">ç¢ºèªä¸Šæ¶å•†å“</button>
    </div>

    <div class="box">
        <h3>ğŸ§Š ç¾æœ‰æ¶ä¸Šå•†å“ (å¯ä¸‹æ¶)</h3>
        <div id="current-list"></div>
    </div>

    <div class="box">
        <h3>ğŸ“¥ é›²ç«¯è¨‚å–®</h3>
        <button onclick="fetchOrders()" style="background:#22c55e;">ğŸ”„ é‡æ–°æ•´ç†è¨‚å–®</button>
        <table id="order-table">
            <thead><tr><th>æ™‚é–“</th><th>é¡§å®¢</th><th>é›»è©±</th><th>å“é …</th><th>ç¸½è¨ˆ</th></tr></thead>
            <tbody id="order-list"></tbody>
        </table>
    </div>

<script>
    const GOOGLE_URL = "https://script.google.com/macros/s/AKfycbzfHhadFwFzg5P005DzlftVNpPFg4HqOxfy3p0ajZwEWAWP_XTinFypj-CFHkFBKJ1E/exec";
    let products = JSON.parse(localStorage.getItem('bear_p_list')) || [];

    function renderInventory() {
        const list = document.getElementById('current-list');
        list.innerHTML = products.map((p, index) => `
            <div class="product-item">
                <div style="display:flex; align-items:center;">
                    <img src="${p.img}" class="item-img" onerror="this.src='https://via.placeholder.com/50'">
                    <span>${p.name} - $${p.price}</span>
                </div>
                <button onclick="removeProduct(${index})" style="background:#ef4444; padding:5px 10px;">ä¸‹æ¶</button>
            </div>
        `).join('');
        localStorage.setItem('bear_p_list', JSON.stringify(products));
    }

    function addProduct() {
        const n = document.getElementById('p-name').value;
        const p = document.getElementById('p-price').value;
        const i = document.getElementById('p-img').value || 'https://via.placeholder.com/200?text=ç„¡ç…§ç‰‡';
        if(n && p) {
            products.push({ id: Date.now(), name: n, price: parseInt(p), img: i });
            renderInventory();
            alert("å·²ä¸Šæ¶ï¼");
            document.getElementById('p-name').value=''; 
            document.getElementById('p-price').value='';
            document.getElementById('p-img').value='';
        }
    }

    function removeProduct(idx) {
        if(confirm("è¦ä¸‹æ¶é€™å€‹å•†å“å—ï¼Ÿ")) {
            products.splice(idx, 1);
            renderInventory();
        }
    }

    async function fetchOrders() {
        const list = document.getElementById('order-list');
        list.innerHTML = "è®€å–ä¸­...";
        try {
            const res = await fetch(GOOGLE_URL);
            const data = await res.json();
            list.innerHTML = data.reverse().map(o => `<tr><td>${o.time}</td><td>${o.name}</td><td><a href="tel:${o.phone}">${o.phone}</a></td><td>${o.items}</td><td>$${o.total}</td></tr>`).join('');
        } catch(e) { list.innerHTML = "å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²å€"; }
    }

    renderInventory();
</script>
</body>
</html>
